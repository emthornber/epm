<!DOCTYPE html>
<HTML>
<HEAD>
<TITLE>Software Distribution with ESP Package Manager</TITLE>
<META NAME="author" CONTENT="Michael R Sweet, Jim Jagielski">
<META NAME="copyright" CONTENT="Copyright ï¿½ 1999-2020 by Michael R Sweet">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso-8859-1">
<STYLE TYPE="text/css"><!--
BODY { font-family: sans-serif; }
H1 { font-family: sans-serif; }
H2 { font-family: sans-serif; }
H3 { font-family: sans-serif; }
H4 { font-family: sans-serif; }
H5 { font-family: sans-serif; }
H6 { font-family: sans-serif; }
SUB { font-size: smaller; }
SUP { font-size: smaller; }
PRE { font-family: monospace; margin-left: 36pt; }
A { text-decoration: none; }
--></STYLE>
</HEAD>
<BODY>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p ALIGN="CENTER"><img ALT="EPM" HEIGHT="128" SRC="epm-256.png" WIDTH="128">
</p>
<h1 ALIGN="CENTER">Software Distribution
<br> with
<br> ESP Package Manager</h1>
<p ALIGN="CENTER">MICHAEL R. SWEET</p>
<p ALIGN="CENTER">JIM JAGIELSKI</p>

<!-- NEW PAGE -->
<h2>Software Distribution with ESP Package Manager</h2>
<h3>Copyright &copy; 2020 by Jim Jagielski</h3>
<h3>Copyright &copy; 2006-2020 by Michael R Sweet</h3>
<h3>Copyright &copy; 2006-2010 by Easy Software Products</h3>
<p> Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you
 may not use this file except in compliance with the License. You may
 obtain a copy of the License at
<br> http://www.apache.org/licenses/LICENSE-2.0
<br> Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied. See the License for the specific language governing
 permissions and limitations under the License.</p>
<HR NOSHADE>
<h1 ALIGN="CENTER"><a NAME="CONTENTS">Table of Contents</a></h1>
<br>
<br><b><a HREF="#1">Preface</a></b>
<ul>
<li><a HREF="#1_1">Notation Conventions</a></li>
<li><a HREF="#1_2">Abbreviations</a></li>
<li><a HREF="#1_3">Other References</a></li>
<li><a HREF="#1_4">Help Me Improve This Book!</a></li>
<li><a HREF="#1_5">Acknowledgments</a></li>
</ul>
<b><a HREF="#INTRO">1 - Introduction to EPM</a></b>
<ul>
<li><a HREF="#2_1">What is EPM?</a></li>
<li><a HREF="#2_2">History and Evolution</a></li>
<li><a HREF="#2_3">Existing Software Packaging Systems</a></li>
<li><a HREF="#2_4">Design Goals of EPM</a></li>
<li><a HREF="#2_5">Resources</a></li>
</ul>
<b><a HREF="#BUILDING">2 - Building EPM</a></b>
<ul>
<li><a HREF="#3_1">Requirements</a></li>
<li><a HREF="#3_2">Configuring the Software</a></li>
<li><a HREF="#3_3">Building the Software</a></li>
<li><a HREF="#3_4">Installing the Software</a></li>
</ul>
<b><a HREF="#PACKAGING">3 - Packaging Your Software with EPM</a></b>
<ul>
<li><a HREF="#4_1">The Basics</a></li>
<li><a HREF="#4_2">Building a Software Package</a></li>
<li><a HREF="#4_3">Package Files</a></li>
</ul>
<b><a HREF="#ADVANCED">4 - Advanced Packaging with EPM</a></b>
<ul>
<li><a HREF="#5_1">Including Other List Files</a></li>
<li><a HREF="#5_2">Dependencies</a></li>
<li><a HREF="#5_3">Scripts</a></li>
<li><a HREF="#5_4">Conditional Directives</a></li>
<li><a HREF="#5_5">Protecting Object Files from Stripping</a></li>
<li><a HREF="#5_6">Software Patches</a></li>
<li><a HREF="#5_7">Variables</a></li>
<li><a HREF="#5_8">Init Scripts</a></li>
<li><a HREF="#5_9">Literal Package Data</a></li>
</ul>
<b><a HREF="#EXAMPLES">5 - EPM Packaging Examples</a></b>
<ul>
<li><a HREF="#6_1">Packaging the EPM Software</a></li>
</ul>
<b><a HREF="#LICENSE">Apache License, Version 2.0</a></b>
<ul>
<li><a HREF="#7_1"> APPENDIX: How to apply the Apache License to your
 work</a></li>
</ul>
<b><a HREF="#MANPAGES">B - Command Reference</a></b>
<ul>
<li><a HREF="#epm">epm(1)</a></li>
<li><a HREF="#epminstall">epminstall(1)</a></li>
<li><a HREF="#mkepmlist">mkepmlist(1)</a></li>
<li><a HREF="#setup">setup(1)</a></li>
</ul>
<b><a HREF="#REFERENCE">C - List File Reference</a></b>
<ul>
<li><a HREF="#epm.list">The EPM List File Format</a></li>
<li><a HREF="#setup.types">The setup.types File</a></li>
</ul>
<HR NOSHADE>
<h1><a NAME="1">Preface</a></h1>
<p>This book provides a tutorial and reference for the ESP Package
 Manager (&quot;EPM&quot;) software, version 5.0, and is organized into the
 following chapters and appendices:</p>
<ul>
<li><a HREF="#INTRO">1 - Introduction to EPM</a></li>
<li><a HREF="#BUILDING">2 - Building EPM</a></li>
<li><a HREF="#PACKAGING">3 - Packaging Your Software with EPM</a></li>
<li><a HREF="#ADVANCED">4 - Advanced Packaging with EPM</a></li>
<li><a HREF="#EXAMPLES">5 - EPM Packaging Examples</a></li>
<li><a HREF="#LICENSE">A - Software License Agreement</a></li>
<li><a HREF="#MANPAGES">B - Command Reference</a></li>
<li><a HREF="#REFERENCE">C - List File Reference</a></li>
</ul>

<!-- NEED 6in -->
<h2><a NAME="1_1">Notation Conventions</a></h2>
<dl>
<dt>The names of commands; the first mention of a command or function in
 a chapter is followed by a manual page section number:
<br> &nbsp;</dt>
<dd><code>epm</code>
<br> <code>epm(1)</code>
<br> &nbsp;</dd>
<dt>File and directory names:
<br> &nbsp;</dt>
<dd><var>/var</var>
<br><var> /usr/bin/epm</var>
<br> &nbsp;</dd>
<dt>Screen output:
<br> &nbsp;</dt>
<dd><tt>Request ID is Printer-123</tt>
<br> &nbsp;</dd>
<dt>Literal user input; special keys like <kbd>ENTER</kbd> are in ALL
 CAPS:
<br> &nbsp;</dt>
<dd><kbd>lp -d printer filename ENTER</kbd>
<br> &nbsp;</dd>
<dt>Long commands are broken up on multiple lines using the backslash
 (\) character; enter the commands without the backslash:
<br> &nbsp;</dt>
<dd><kbd>foo start of long command \
<br> &nbsp;&nbsp;&nbsp;&nbsp;end of long command ENTER</kbd>
<br> &nbsp;</dd>
<dt>Numbers in the text are written using the period (.) to indicate the
 decimal point:
<br> &nbsp;</dt>
<dd>12.3
<br> &nbsp;</dd>
</dl>

<!-- NEED 3in -->
<h2><a NAME="1_2">Abbreviations</a></h2>
<p>The following abbreviations are used throughout this book:</p>
<dl>
<dt>kb</dt>
<dd>Kilobytes, or 1024 bytes
<br> &nbsp;</dd>
<dt>Mb</dt>
<dd>Megabytes, or 1048576 bytes
<br> &nbsp;</dd>
<dt>Gb</dt>
<dd>Gigabytes, or 1073741824 bytes
<br> &nbsp;</dd>
</dl>

<!-- NEED 4in -->
<h2><a NAME="1_3">Other References</a></h2>
<dl>
<dt><a HREF="https://jimjag.github.io/epm/">
https://jimjag.github.io/epm/</a></dt>
<dd>The official home page of the ESP Package Manager software.
<br> &nbsp;</dd>
<dt><a HREF="http://www.debian.org/devel/">http://www.debian.org/devel/</a>
</dt>
<dd>Debian Developers' Corner
<br> &nbsp;</dd>
<dt><a HREF="http://techpubs.sgi.com/">http://techpubs.sgi.com/</a></dt>
<dd>IRIX Documentation On-Line
<br> &nbsp;</dd>
<dt><a HREF="http://www.rpm.org/">http://www.rpm.org/</a></dt>
<dd>The Red Hat Package Manager home page.
<br> &nbsp;</dd>
<dt><a HREF="http://docs.sun.com/">http://docs.sun.com/</a></dt>
<dd>Solaris Documentation On-Line
<br> &nbsp;</dd>
</dl>
<h2><a NAME="1_4">Help Me Improve This Book!</a></h2>
<p>We've done my best to ensure that this book is both accurate and
 clear. If you find errors or have a suggestion for improving the book,
 please file a bug at:</p>
<pre>
<a href="https://github.com/jimjag/epm/issues">https://github.com/jimjag/epm/issues</a>
</pre>
<h2><a NAME="1_5">Acknowledgments</a></h2>
<p>We'd like to thank the following people for their contributions to
 EPM:</p>
<ul>
<li>Gareth Armstrong: HP-UX and %release enhancements</li>
<li>Nicolas Bazin: Openserver and Unixware support</li>
<li>Richard Begg: HP-UX fixes</li>
<li>Dirk Datzert: Bug fixes</li>
<li>Alan Eldridge: Makefile and RPM fixes</li>
<li>Vicentini Emanuele: IRIX enhancements</li>
<li>Jeff Harrell: IRIX enhancements</li>
<li>Lars Kellogg-Stedman: Debian fixes</li>
<li>Jochen Kmietsch: mkepmlist fixes</li>
<li>Aneesh Kumar K.V.: Tru64 setld package support</li>
<li>David Lee: Build system improvements</li>
<li>Scott Leerssen: mkepmlist fixes, BSD package support</li>
<li>Jeff Licquia: Debian support/enhancements</li>
<li>David Maltz: AIX fixes</li>
<li>Joel Nordell: SCO fixes</li>
<li>Rok Papez: Bug fixes and absolute output directory support</li>
<li>Holger Paschke: Documentation fixes</li>
<li>Phil Reynolds: OpenBSD fixes</li>
<li>Ganesan Rajagopal: Solaris fixes</li>
<li>Uwe R&auml;sche: AIX support</li>
<li>Ralf Rohm: Solaris fixes</li>
<li>Jochen Schaeuble: epminstall fixes</li>
<li>Jason Shiffer: HP-UX fixes</li>
<li>Andrea Suatoni: IRIX fixes</li>
<li>Andy Walter: QNX support</li>
<li>Geoffrey Wossum: --output-directory option</li>
<li>Jean Yves: BSD package and mkepmlist fixes</li>
</ul>
<HR NOSHADE>
<h1><a NAME="INTRO">1 - Introduction to EPM</a></h1>
<p>This chapter provides an introduction to the ESP Package Manager
 (&quot;EPM&quot;).</p>
<h2><a NAME="2_1">What is EPM?</a></h2>
<p>Software distribution under UNIX/Linux can be a challenge, especially
 if you ship software for more than one operating system. Every
 operating system provides its own software packaging tools and each has
 unique requirements or implications for the software development
 environment.</p>
<p>The ESP Package Manager (&quot;EPM&quot;) is one solution to this problem.
 Besides its own &quot;portable&quot; distribution format, EPM also supports the
 generation of several vendor-specific formats. This allows you to build
 software distribution files for almost any operating system from the
 same sources.</p>
<h2><a NAME="2_2">History and Evolution</a></h2>
<p>When Easy Software Products was founded by me in 1993, the company
 originally shipped software only for the SGI IRIX operating system.
 Support was added for Solaris in 1997, followed quickly by HP-UX in
 1998.</p>
<p>Each new operating system and supported processor required a new set
 of packaging files. While this worked, it also meant keeping all of the
 packaging files synchronized manually. Needless to say, this process
 was far from perfect and there was more than one distribution that was
 not identical on all operating systems.</p>
<p>As I began developing CUPS (<a HREF="https://www.cups.org/">
https://www.cups.org/</a>) in 1997, the initial goal was to add support
 for two additional operating systems: Linux and Compaq Tru64 UNIX. If I
 was to avoid the mistakes of the past, I clearly had to change how
 software distributions were produced.</p>
<p>The first version of EPM was released in 1999 and supported so-called
 &quot;portable&quot; software distributions that were not tied to any particular
 operating system or packaging software. Due to popular demand, we added
 support for vendor-specific packaging formats in the second major
 release of EPM, allowing the generation of portable or &quot;native&quot;
 distributions from one program and one set of software distribution
 files.</p>
<h2><a NAME="2_3">Existing Software Packaging Systems</a></h2>
<p>As I looked for a solution to our problem, we naturally investigated
 the existing open-source packaging systems. Under Linux, I looked at
 the Red Hat Package Manager (&quot;RPM&quot;) and Debian packaging software
 (&quot;dpkg&quot; and &quot;dselect&quot;). For the commercial UNIX's I looked at the
 vendor-supplied packaging systems. <a HREF="#TABLE_1_1">Table 1.1</a>
 shows the results of my investigation.</p>

<!-- NEED 5in -->
<table ALIGN="CENTER" BORDER="1"><caption> <a NAME="TABLE_1_1">Table
 1.1: Software Packaging Formats</a></caption>
<tr><th><font SIZE="-4">Format</font></th><th><font SIZE="-4">Operating
 Systems<sup>1</sup></font></th><th><font SIZE="-4">Binaries</font></th><th>
<font SIZE="-4">Cross- Platform</font></th><th><font SIZE="-4">Patches</font>
</th><th><font SIZE="-4">Up- grades</font></th><th><font SIZE="-4">Con-
 flicts</font></th><th><font SIZE="-4">Re- quires</font></th><th><font SIZE="-4">
Re- places</font></th><th><font SIZE="-4">Config Files</font></th><th><font
SIZE="-4">Map Files</font></th><th><font SIZE="-4">Un- install</font></th>
</tr>
<tr><td ALIGN="CENTER"><small>installp</small></td><td ALIGN="CENTER"><small>
AIX</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>pkg_add</small></td><td ALIGN="CENTER"><small>
FreeBSD</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes<sup>2</sup></small></td><td ALIGN="CENTER"><small>No</small></td><td
ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER"><small>No</small>
</td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER"><small>
No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>pkg_add</small></td><td ALIGN="CENTER"><small>
NetBSD
<br> OpenBSD</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes<sup>2</sup></small></td><td ALIGN="CENTER"><small>No</small></td><td
ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER"><small>Yes</small>
</td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER"><small>
No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>deb</small></td><td ALIGN="CENTER"><small>
Ubuntu Linux
<br> Debian GNU/Linux</small></td><td ALIGN="CENTER"><small>Yes</small></td><td
ALIGN="CENTER"><small>Yes<sup>2</sup></small></td><td ALIGN="CENTER"><small>
No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>depot</small></td><td ALIGN="CENTER"><small>
HP-UX</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>inst</small></td><td ALIGN="CENTER"><small>
IRIX</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>Install.app</small></td><td ALIGN="CENTER">
<small>macOS</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td></tr>
<tr><td ALIGN="CENTER"><small>pkgadd</small></td><td ALIGN="CENTER"><small>
Solaris</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>rpm</small></td><td ALIGN="CENTER"><small>
CentOS
<br> Red Hat
<br> SuSE</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes<sup>2</sup></small></td><td ALIGN="CENTER"><small>No</small></td><td
ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER"><small>Yes</small>
</td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER"><small>
No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>setld</small></td><td ALIGN="CENTER"><small>
Tru64 UNIX</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>Yes</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>Yes</small></td></tr>
<tr><td ALIGN="CENTER"><small>slackware</small></td><td ALIGN="CENTER"><small>
Slackware Linux</small></td><td ALIGN="CENTER"><small>Yes</small></td><td
ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER"><small>No</small>
</td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER"><small>
Yes</small></td><td ALIGN="CENTER"><small>Yes</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>No</small></td><td ALIGN="CENTER">
<small>No</small></td><td ALIGN="CENTER"><small>Yes</small></td></tr>
</table>
<ol>
<li>Standard packaging system for named operating systems.</li>
<li>These packaging systems are cross-platform but require the package
 management utilities to be installed on the platform before installing
 the package.</li>
</ol>
<p>&nbsp;</p>
<p>As you can see, none of the formats supported every feature we were
 looking for. One common fault of all these formats is that they do not
 support a common software specification file format. That is, making a
 Debian software distribution requires significantly different support
 files than required for a Solaris pkg distribution. This makes it
 extremely difficult to manage distributions for multiple operating
 systems.</p>
<p>All of the package formats support binary distributions. The RPM and
 Debian formats also support source distributions that specifically
 allow for recompilation and installation. Only the commercial UNIX
 formats support patch distributions - you have to completely upgrade a
 software package with RPM and Debian. All but the Solaris <code>pkg</code>
 format allow you to upgrade a package without removing the old version
 first.</p>
<p>When building the software packages, RPM and Debian force you to
 create the actual directories, copy the files to those directories, and
 set the ownerships and permissions. You essentially are creating a
 directory for your software that can be archived in the corresponding
 package format. To ensure that all file permissions and ownerships are
 correct, you must build the distribution as the root user or use the <code>
fakeroot</code> software, introducing potential security risks and
 violating many corporate security policies. It can also make building
 distributions difficult when dynamic data such as changing data files
 or databases is involved.</p>
<p>The commercial UNIX formats use software list files that map source
 files to the correct directories and permissions. This allows for
 easier delivery of dynamic data, configuration management of what each
 distribution actually contains, and eliminates security issues with
 special permissions and building distributions as the root user. Using
 the proprietary format also has the added benefit of allowing for
 software patches and using the familiar software installation tools for
 that operating system. The primary disadvantage is that the same
 distributions and packaging software cannot be used on other operating
 systems.</p>
<h2><a NAME="2_4">Design Goals of EPM</a></h2>
<p>EPM was designed from the beginning to build binary software
 distributions using a common software specification format. The same
 distribution files work for all operating systems and all distribution
 formats. Supporting source code distributions was not a goal since most
 RPM and Debian source distributions are little more than wrapping
 around a compressed tar file containing the source files and a
 configure script.</p>
<p>Over the years, additional features have made their way into EPM to
 support more advanced software packages. Whenever possible, EPM
 emulates a feature if the vendor package format does not support it
 natively.</p>
<h2><a NAME="2_5">Resources</a></h2>
<p>The EPM project page provides access to the current software,
 documentation, and issue tracker for EPM:</p>
<pre>
<a HREF="https://jimjag.github.io/epm/">https://jimjag.github.io/epm/</a>
</pre>
<p>The EPM source code can be downloaded in compressed tar files or via
 the popular Subversion software. Please see the EPM project page for
 complete instructions.</p>
<HR NOSHADE>
<h1><a NAME="BUILDING">2 - Building EPM</a></h1>
<p>This chapter shows how to configure, build, and install the ESP
 Package Manager.</p>
<h2><a NAME="3_1">Requirements</a></h2>
<p>EPM requires very little pre-installed software to work. Most items
 will likely be provided as part of your OS. Your development system
 will need a C compiler, the <code>make(1)</code> program (GNU, BSD, and
 most vendor <code>make</code> programs should work), a POSIX shell
 (Bourne, Korn, Bash, etc.), and <code>gzip(1)</code>.</p>
<p>The optional graphical setup program requires a C++ compiler, the
 FLTK library, version 1.1.x or 1.3.x, and (for UNIX/Linux) the X11
 libraries. FLTK is available at the following URL:</p>
<pre>
<a HREF="http://www.fltk.org/">http://www.fltk.org/</a>
</pre>
<p>Your end-user systems will require a POSIX shell, the <code>df(1)</code>
 program, the <code>tar(1)</code> program, and the <code>gzip(1)</code>
 program to install portable distributions. All but the last are
 standard items, and most vendors include <code>gzip</code> as well.</p>
<p>EPM can also generate vendor-specific distributions. These require
 the particular vendor tool, such as <code>rpm(8)</code> and <code>
dpkg(8)</code>, to generate the software distribution on the development
 system and load the software distribution on the end-user system.</p>
<h2><a NAME="3_2">Configuring the Software</a></h2>
<p>EPM uses GNU <code>autoconf(1)</code> to configure itself for your
 system. The <code>configure</code> script is used to configure the EPM
 software, as follows:</p>
<pre>
<kbd>./configure ENTER</kbd>
</pre>
<h3>Choosing Compilers</h3>
<p>If the <code>configure</code> script is unable to determine the name
 of your C or C++ compiler, set the <code>CC</code> and <code>CXX</code>
 environment variables to point to the C and C++ compiler programs,
 respectively. You can set these variables using the following commands
 in the Bourne, Korn, or Bash shells:</p>
<pre>
<kbd>export CC=/foo/bar/gcc ENTER
export CXX=/foo/bar/gcc ENTER</kbd>
</pre>
<p>If you are using C shell or tcsh, use the following commands instead:</p>
<pre>
<kbd>setenv CC /foo/bar/gcc ENTER
setenv CXX /foo/bar/gcc ENTER</kbd>
</pre>
<p>Run the <code>configure</code> script again to use the new commands.</p>
<h3>Choosing Installation Directories</h3>
<p>The default installation prefix is<var> /usr/local</var>, which will
 place the EPM programs in<var> /usr/local/bin</var>, the setup GUI in<var>
 /usr/local/lib/epm</var>, and the man pages in<var>
 /usr/local/share/man</var>. Use the <code>--prefix</code> option to
 relocate these files to another directory:</p>
<pre>
<kbd>./configure --prefix=/example/path ENTER</kbd>
</pre>
<p>The <code>configure</code> script also accepts the <code>--bindir</code>
, <code>--libdir</code>, and <code>--mandir</code> options to relocate
 each directory separately, as follows:</p>
<pre>
<kbd>./configure --bindir=/example/path/bin --libdir=/example/path/lib \
    --mandir=/example/path/share/man ENTER</kbd>
</pre>
<h3>Options for the Setup GUI</h3>
<p>The setup GUI requires the FLTK library. The configure script will
 look for the <code>fltk-config</code> utility that comes with FLTK. Set
 the FLTKCONFIG environment variable to the full path of this utility if
 it cannot be found in the current path:</p>
<pre>
<kbd>setenv FLTKCONFIG /foo/bar/bin/fltk-config ENTER</kbd>
</pre>
<p>or:</p>
<pre>
<kbd>FLTKCONFIG=/foo/bar/bin/fltk-config ENTER
export FLTKCONFIG</kbd>
</pre>
<h2><a NAME="3_3">Building the Software</a></h2>
<p>Once you have configured the software, type the following command to
 compile it:</p>
<pre>
<kbd>make ENTER</kbd>
</pre>
<p>Compilation should take a few minutes at most. Then type the
 following command to determine if the software compiled successfully:</p>
<pre>
<kbd>make test ENTER</kbd>
Portable distribution build test PASSED.
Native distribution build test PASSED.
</pre>
<p>The <code>test</code> target builds a portable and native
 distribution of EPM and reports if the two distributions were generated
 successfully.</p>
<h2><a NAME="3_4">Installing the Software</a></h2>
<p>Now that you have compiled and tested the software, you can install
 it using the <code>make</code> command or one of the distributions that
 was created. You should be logged in as the super-user unless you
 specified installation directories for which you have write permission.
 The <code>su(8)</code> command is usually sufficient to install
 software:</p>
<pre>
<kbd>su ENTER</kbd>
</pre>
<p>Operating systems such as macOS do not enable the root account by
 default. The <code>sudo(8)</code> command is used instead:</p>
<pre>
<kbd>sudo <i>installation command</i> ENTER</kbd>
</pre>

<!-- NEED 2in -->
<h3>Installing Using the <code>make</code> Command</h3>
<p>Type the following command to install the EPM software using the <code>
make</code> command:</p>
<pre>
<kbd>make install ENTER</kbd>
Installing EPM setup in /usr/local/lib/epm
Installing EPM programs in /usr/local/bin
Installing EPM manpages in /usr/local/share/man/man1
Installing EPM documentation in /usr/local/share/doc/epm
</pre>
<p>Use the <code>sudo</code> command to install on macOS:</p>
<pre>
<kbd>sudo make install ENTER</kbd>
Installing EPM setup in /usr/local/lib/epm
Installing EPM programs in /usr/local/bin
Installing EPM manpages in /usr/local/share/man/man1
Installing EPM documentation in /usr/local/share/doc/epm
</pre>
<h3><a NAME="INSTALL_PORTABLE">Installing Using the Portable
 Distribution</a></h3>
<p>The portable distribution can be found in a subdirectory named using
 the operating system, version, and architecture. For example, the
 subdirectory for a Linux 2.4.x system on an Intel-based system would be<var>
 linux-2.4-intel</var>. The subdirectory name is built from the
 following template:</p>
<pre>
<i>os-major.minor-architecture</i>
</pre>
<p>The <code>os</code> name is the common name for the operating system.
 <a HREF="#TABLE_2_1">Table 2.1</a> lists the abbreviations for most
 operating systems.</p>
<p>The <code>major.minor</code> string is the operating system version
 number. Any patch revision information is stripped from the version
 number, as are leading characters before the major version number. For
 example, HP-UX version B.11.11 will result in a version number string
 of <code>11.11</code>.</p>
<center>
<table BORDER="1" CELLPADDING="2"><caption> <a NAME="TABLE_2_1">Table
 2.1: Operating System Name Abbreviations</a></caption>
<tr><th>Operating System</th><th>Name</th></tr>
<tr><td>AIX</td><td><code>aix</code></td></tr>
<tr><td>Compaq Tru64 UNIX
<br> Digital UNIX
<br> OSF/1</td><td><code>tru64</code></td></tr>
<tr><td>FreeBSD</td><td><code>freebsd</code></td></tr>
<tr><td>HP-UX</td><td><code>hpux</code></td></tr>
<tr><td>IRIX</td><td><code>irix</code></td></tr>
<tr><td>Linux</td><td><code>linux</code></td></tr>
<tr><td>macOS</td><td><code>osx</code></td></tr>
<tr><td>NetBSD</td><td><code>netbsd</code></td></tr>
<tr><td>OpenBSD</td><td><code>openbsd</code></td></tr>
<tr><td>Solaris</td><td><code>solaris</code></td></tr>
</table>
</center>

<!-- NEED 3in -->
<center>
<table BORDER="1" CELLPADDING="2"><caption> <a NAME="TABLE_2_2">Table
 2.2: Processor Architecture Abbreviations</a></caption>
<tr><th>Processor(s)</th><th>Abbreviation</th></tr>
<tr><td>Compaq Alpha</td><td><code>alpha</code></td></tr>
<tr><td>HP Precision Architecture</td><td><code>hppa</code></td></tr>
<tr><td>INTEL 80x86</td><td><code>intel</code></td></tr>
<tr><td>INTEL 80x86 w/64bit Extensions</td><td><code>x86_64</code></td></tr>
<tr><td>MIPS RISC</td><td><code>mips</code></td></tr>
<tr><td>IBM Power PC</td><td><code>powerpc</code></td></tr>
<tr><td>SPARC
<br> MicroSPARC
<br> UltraSPARC</td><td><code>sparc</code></td></tr>
</table>
</center>
<p>The <code>architecture</code> string identifies the target processor.
 <a HREF="#TABLE_2_2">Table 2.2</a> lists the supported processors.</p>
<p>Once you have determined the subdirectory containing the
 distribution, type the following commands to install EPM from the
 portable distribution:</p>
<pre>
<kbd>cd <i>os-major.minor-architecture<i> ENTER
./epm.install ENTER</i></i></kbd>
</pre>
<p>The software will be installed after answering a few yes/no
 questions.</p>
<h3>Installing Using the Native Distribution</h3>
<p>The <code>test</code> target also builds a distribution in the native
 operating system format, if supported. <a HREF="#TABLE_2_3">Table 2.3</a>
 lists the native formats for each supported operating system and the
 command to run to install the software.</p>

<!-- NEED 5in -->
<center>
<table BORDER="1" CELLPADDING="2"><caption> <a NAME="TABLE_2_3">Table
 2.3: Native Operating System Formats</a></caption>
<tr><th>Operating System</th><th>Format</th><th>Command</th></tr>
<tr><td>AIX</td><td><code>aix</code></td><td NOWRAP><code>installp -d<i>
directory</i> epm</code></td></tr>
<tr><td>Compaq Tru64 UNIX
<br> Digital UNIX
<br> OSF/1</td><td><code>setld</code></td><td NOWRAP><code>setld -a<i>
 directory</i></code></td></tr>
<tr><td>FreeBSD
<br> NetBSD
<br> OpenBSD</td><td><code>bsd</code></td><td NOWRAP><code>cd<i>
 directory</i>
<br> pkg_add epm</code></td></tr>
<tr><td>HP-UX</td><td><code>depot</code></td><td NOWRAP><code>swinstall
 -f<i> directory</i></code></td></tr>
<tr><td>IRIX</td><td><code>inst</code></td><td NOWRAP><code>swmgr -f<i>
 directory</i></code></td></tr>
<tr><td>Linux</td><td><code>rpm</code></td><td NOWRAP><code>rpm -i<i>
 directory</i>/epm-4.1.rpm</code></td></tr>
<tr><td>macOS</td><td><code>osx</code></td><td NOWRAP><code>open<i>
 directory</i>/<code>epm-4.1.pkg</code></code></td></tr>
<tr><td>Solaris</td><td><code>pkg</code></td><td NOWRAP><code>pkgadd -d<i>
 directory</i> epm</code></td></tr>
</table>
</center>
<HR NOSHADE>
<h1><a NAME="PACKAGING">3 - Packaging Your Software with EPM</a></h1>
<p>This chapter describes how to use EPM to package your own software
 packages.</p>
<h2><a NAME="4_1">The Basics</a></h2>
<p>EPM reads one or more software &quot;list&quot; files that describe a single
 software package. Each list file contains one or more lines of ASCII
 text containing product or file information.</p>
<p>Comments lines start with the <code>#</code> character, directive
 lines start with the <code>%</code> character, variables lines start
 with the <code>$</code> character, and file, directory, init script,
 and symlink lines start with a letter.</p>

<!-- NEED 3in -->
<h3>Product Information</h3>
<p>Every list file needs to define the product name, copyright,
 description, license, README file, vendor, and version:</p>
<pre>
%product Kung Foo Firewall
%copyright 1999-2005 by Foo Industries, All Rights Reserved.
%vendor Foo Industries
%license LICENSE
%readme README
%description Kung Foo firewall software for your firewall.
%version 1.2.3p4 1020304
</pre>
<p>The <code>%license</code> and <code>%readme</code> directives specify
 files for the license agreement and README files for the package,
 respectively.</p>
<p>The <code>%product</code>, <code>%copyright</code>, <code>%vendor</code>
, and <code>%description</code> directives take text directly from the
 line.</p>
<p>The <code>%version</code> directive specifies the version numbers of
 the package. The first number is the human-readable version number,
 while the second number is the integer version number. If you omit the
 integer version number, EPM will calculate one for you.</p>
<h3>Files, Directories, and Symlinks</h3>
<p>Each file in the distribution is listed on a line starting with a
 letter. The format of all lines is:</p>
<pre>
type mode owner group destination source <i>options</i>
</pre>
<p>Regular files use the letter <code>f</code> for the type field:</p>
<pre>
f 755 root sys /usr/bin/foo foo
</pre>
<p>Configuration files use the letter <code>c</code> for the type field:</p>
<pre>
c 644 root sys /etc/foo.conf foo.conf
</pre>

<!-- NEED 2in -->
<p>Directories use the letter <code>d</code> for the type field and use
 a source path of &quot;-&quot;:</p>
<pre>
d 755 root sys /var/spool/foo -
</pre>
<p>Finally, symbolic links use the letter <code>l</code> (lowercase L)
 for the type field:</p>
<pre>
l 000 root sys /usr/bin/foobar foo
</pre>
<p>The source field specifies the file to link to and can be a relative
 path. Just as with the <code>ln</code> command, source paths are
 relative to the destination directory. For example, the symbolic link<var>
 /usr/bin/foobar</var> above points to the file<var> /usr/bin/foo</var>.</p>
<h3>Wildcards</h3>
<p>Wildcard patterns can be used in the source field to include multiple
 files on a single line. The destination field contains the destination
 directory for the matched files:</p>
<pre>
f 0444 root sys /usr/share/doc/foo *.html
</pre>
<p>For example, if the source directory contains three HTML files,<var>
 bar.html</var>,<var> baz.html</var>, and<var> foo.html</var>, the
 wildcard line above would expand to:</p>
<pre>
f 0444 root sys /usr/share/doc/foo/bar.html bar.html
f 0444 root sys /usr/share/doc/foo/baz.html baz.html
f 0444 root sys /usr/share/doc/foo/foo.html foo.html
</pre>

<!-- NEED 3in -->
<h3>Subpackages</h3>
<p>Subpackages are optional parts of your software package. For example,
 if your package includes developer files, you might provide them as a
 subpackage so that users that will not be developing add-ons to your
 software can omit them from the installation.</p>
<center>
<table BGCOLOR="#cccccc" BORDER="1" CELLPADDING="5" WIDTH="80%">
<tr><td><b>Note:</b>
<br> Subpackages are implemented as native subsets of the main package
 for the AIX, HPUX, IRIX, Solaris, and Tru64 formats and as separate
 packages that depend on the main (parent) package for all other
 formats.</td></tr>
</table>
</center>
<p>To define a subpackage, use the <code>%subpackage</code> directive
 followed by a <code>%description</code> directive:</p>
<pre>
%subpackage foo
%description One-Line Description of Foo
</pre>
<p>Files, scripts, and dependencies that follow the <code>%subpackage</code>
 directive are treated as part of that subpackage. Specifying the <code>
%subpackage</code> directive with no name returns processing to the main
 (parent) package.</p>

<!-- NEED 2in -->
<p>You can alternate between subpackages as many times as you like:</p>
<pre>
%description Main package description
f 0755 /usr/bin/bar bar

%subpackage foo
%description Foo programs
f 0755 /usr/bin/foo foo
%requires bla

%subpackage
f 0644 /usr/share/man/man1/bar.1

%subpackage foo
f 0644 /usr/share/man/man1/foo.1
</pre>
<p>The above example creates a package containing the &quot;bar&quot; program and
 man page with a subpackage containing the &quot;foo&quot; program and man page.
 The &quot;foo&quot; subpackage depends both on the main package (implicit <code>
%requires</code>) and another package called &quot;bla&quot;.</p>

<!-- NEED 2in -->
<h2><a NAME="4_2">Building a Software Package</a></h2>
<p>The <code>epm(1)</code> program is used to build software package
 from list files. To build a portable software package for an
 application called &quot;foo&quot;, type the following command:</p>
<pre>
<kbd>epm foo ENTER</kbd>
</pre>
<p>If your application uses a different base name than the list file,
 you can specify the list filename on the command-line as well:</p>
<pre>
<kbd>epm foo bar.list ENTER</kbd>
</pre>
<h3>Installing the Software Package</h3>
<p>Once you have created the software package, you can install it.
 Portable packages include an installation script called<var>
 product.install</var>, where &quot;product&quot; is the name of the package:</p>
<pre>
<kbd>cd os-release-arch ENTER
./product.install ENTER</kbd>
</pre>
<p>After answering a few yes/no questions, the software will be
 installed. To bypass the questions, run the script with the <code>now</code>
 argument:</p>
<pre>
<kbd>cd os-release-arch ENTER
./product.install now ENTER</kbd>
</pre>

<!-- NEED 5in -->
<p ALIGN="CENTER"><a NAME="FIGURE_3_1">Figure 3.1: The EPM Setup GUI</a>
<br> <img ALT="The EPM Setup GUI" HEIGHT="436" SRC="setup.png" WIDTH="724">
</p>
<h3>Including the Setup GUI</h3>
<p>EPM also provides an optional graphical setup program (<a HREF="#FIGURE_3_1">
Figure 3.1</a>). To include the setup program in your distributions,
 create a product logo image in GIF or XPM format and use the <code>
--setup-image</code> option when creating your distribution:</p>
<pre>
<kbd>epm --setup-image foo.xpm foo ENTER</kbd>
</pre>
<p>This option is only supported when creating for portable and macOS
 software packages.</p>

<!-- NEED 5in -->
<h3>Creating Vendor Package Files</h3>
<p>EPM can also produce vendor-specific packages using the <code>-f</code>
 option:</p>
<pre>
<kbd>epm -f format foo bar.list ENTER</kbd>
</pre>
<p>The<i> format</i> option can be one of the following keywords:</p>
<ul>
<li><code>aix</code> - AIX software packages.</li>
<li><code>bsd</code> - FreeBSD, NetBSD, or OpenBSD software packages.</li>
<li><code>deb</code> - Debian software packages.</li>
<li><code>depot</code> or <code>swinstall</code> - HP-UX software
 packages.</li>
<li><code>inst</code> or <code>tardist</code> - IRIX software packages.</li>
<li><code>macos</code> or <code>macos-signed</code> - macOS software
 packages.</li>
<li><code>native</code> - &quot;Native&quot; software packages (RPM, INST, DEPOT,
 PKG, etc.) for the platform.</li>
<li><code>pkg</code> - Solaris software packages.</li>
<li><code>portable</code> - Portable software packages (default).</li>
<li><code>rpm</code> or <code>rpm-signed</code> - Red Hat software
 packages.</li>
<li><code>setld</code> - Tru64 (setld) software packages.</li>
<li><code>slackware</code> - Slackware software packages.</li>
</ul>
<p>Everything in the software list file stays the same - you just use
 the <code>-f</code> option to select the format. For example, to build
 an RPM distribution of EPM, type:</p>
<pre>
epm -f rpm epm
</pre>
<p>The result will be one or more RPM package files instead of the
 portable package files.</p>
<h2><a NAME="4_3">Package Files</a></h2>
<p>EPM creates the package files in the output directory. As mentioned
 in <a HREF="#INSTALL_PORTABLE">Chapter 1, &quot;Installing Using the
 Portable Distribution&quot;</a>, the default output directory is based on
 the operating system name, version, and architecture. Each package
 format will leave different files in the output directory.</p>
<h3>AIX Package Files</h3>
<p>AIX packages are contained in a file called<var> name.bff</var>,
 where &quot;name&quot; is the product/package name you supplied on the
 command-line.</p>
<h3>BSD Package Files</h3>
<p>BSD packages are contained in a file called<var> name.tgz</var>,
 where &quot;name&quot; is the product/package name you supplied on the
 command-line.</p>
<h3>HP-UX Package Files</h3>
<p>HP-UX packages are contained in two files called<var> name.depot.gz</var>
 and<var> name.depot.tgz</var>, where &quot;name&quot; is the product/package name
 you supplied on the command-line. The<var> name.depot.gz</var> file can
 be supplied directly to the <code>swinstall(1m)</code> command, while
 the<var> name.depot.tgz</var> file contains a compressed <code>tar(1)</code>
 archive that can be used to install the software from CD-ROM or network
 filesystem.</p>
<h3>Debian Package Files</h3>
<p>Debian packages are contained in a file called<var> name.deb</var> or<var>
 name.deb.tgz</var> when there are subpackages, where &quot;name&quot; is the
 product/package name you supplied on the command-line. The<var>
 name.deb.tgz</var> file contains a compressed <code>tar</code> archive
 containing<var> name.deb</var> and<var> name-subpackage.deb</var> files
 that can be installed from CD-ROM, disk, or network filesystem.</p>
<h3>IRIX Package Files</h3>
<p>IRIX packages are contained in a file called<var> name.tardist</var>,
 where &quot;name&quot; is the product/package name you supplied on the
 command-line.</p>
<h3>macOS Package Files</h3>
<p>macOS packages are contained in a file called<var> name.dmg</var>,
 where &quot;name&quot; is the product/package name you supplied on the
 command-line.</p>
<h3>RPM Package Files</h3>
<p>RPM packages are contained in a file called<var> name.rpm</var> or<var>
 name.rpm.tgz</var> when there are subpackages, where &quot;name&quot; is the
 product/package name you supplied on the command-line. The<var>
 name.rpm.tgz</var> file contains a compressed <code>tar</code> archive
 containing<var> name.rpm</var> and<var> name-subpackage.rpm</var> files
 that can be installed from CD-ROM, disk, or network filesystem.</p>
<h3>Slackware Package Files</h3>
<p>Slackware packages are contained in a file called<var> name.tgz</var>
, where &quot;name&quot; is the product/package name you supplied on the
 command-line.</p>
<h3>Solaris Package Files</h3>
<p>Solaris packages are contained in two files called<var> name.pkg.gz</var>
 and<var> name.pkg.tgz</var>, where &quot;name&quot; is the product/package name
 you supplied on the command-line. The<var> name.pkg.gz</var> file is a
 compressed package file that can be used directly with the <code>
pkgadd(1m)</code> command, while the<var> name.pkg.tgz</var> file is a
 compressed <code>tar</code> archive that can be used to install the
 software from CD-ROM, disk, or network filesystem.</p>
<h3>Tru64 Package Files</h3>
<p>Tru64 packages are contained in a file called<var> name.tar.gz</var>,
 where &quot;name&quot; is the product/package name you supplied on the
 command-line.</p>
<HR NOSHADE>
<h1><a NAME="ADVANCED">4 - Advanced Packaging with EPM</a></h1>
<p>This chapter describes the advanced packaging features of EPM.</p>
<h2><a NAME="5_1">Including Other List Files</a></h2>
<p>The <code>%include</code> directive includes another list file:</p>
<pre>
%include filename
</pre>
<p>Includes can usually be nested up to 250 levels depending on the host
 operating system and libraries.</p>
<h2><a NAME="5_2">Dependencies</a></h2>
<p>EPM supports four types of dependencies in list files: <code>
%incompat</code>, <code>%provides</code>, <code>%replaces</code>, and <code>
%requires</code>. <a HREF="#TABLE_4_1">Table 4.1</a> shows the level of
 support for each package format.</p>

<!-- NEED 5in -->
<center>
<table BORDER="1" CELLPADDING="2"><caption> <a NAME="TABLE_4_1">Table
 4.1: Dependency Support</a></caption>
<tr><th>Format</th><th>%incompat</th><th>%provides</th><th>%replaces</th><th>
%requires</th></tr>
<tr><td ALIGN="CENTER">aix</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">bsd</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">deb</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes<sup>1</sup></td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">Yes</td>
</tr>
<tr><td ALIGN="CENTER">inst</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">osx</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td></tr>
<tr><td ALIGN="CENTER">pkg</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">portable</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">rpm</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">setld</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td></tr>
<tr><td ALIGN="CENTER">slackware</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td></tr>
<tr><td ALIGN="CENTER">swinstall</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">Yes</td></tr>
</table>
</center>
<ol>
<li>Debian's package format does not currently support version numbers
 for <code>%provides</code> dependencies.</li>
</ol>
<p>&nbsp;</p>
<p>Software conflicts and requirements are specified using the <code>
%incompat</code> and <code>%requires</code> directives.</p>
<p>If your software replaces another package, you can specify that using
 the <code>%replaces</code> directive. <code>%replaces</code> is
 silently mapped to <code>%incompat</code> when the package format does
 not support package replacement.</p>
<p>If your package provides certain functionality associated with a
 standard name, the <code>%provides</code> directive can be used.</p>

<!-- NEED 1in -->
<p>Dependencies are specified using the package name and optionally the
 lower and upper version numbers:</p>
<pre>
%requires foobar
%requires foobar 1.0
%incompat foobar 0.9
%replaces foobar
%replaces foobar 1.2 3.4
%provides foobar
</pre>
<p>or the filename:</p>
<pre>
%requires /usr/lib/libfoobar.so
%incompat /usr/lib/libfoobar.so.1.2
</pre>
<p>Package dependencies are currently enforced only for the same package
 format, so a portable distribution that requires package &quot;foobar&quot; will
 only look for an installed &quot;foobar&quot; package in portable format.</p>
<p>Filename dependencies are only supported by the Debian, portable, and
 RPM distribution formats.</p>
<h2><a NAME="5_3">Scripts</a></h2>
<p>Bourne shell script commands can be executed before or after
 installation, patching, or removal of the software. <a HREF="#TABLE_4_2">
Table 4.2</a> shows the support for scripts in each package format.</p>
<p>The <code>%preinstall</code> and <code>%postinstall</code> directives
 specify commands to be run before and after installation, respectively:</p>
<pre>
%preinstall echo Command before installing
%postinstall echo Command after installing
</pre>
<p>Similarly, the <code>%prepatch</code> and <code>%postpatch</code>
 directives specify commands to be executed before and after patching
 the software:</p>
<pre>
%prepatch echo Command before patching
%postpatch echo Command after patching
</pre>
<p>Finally, the <code>%preremove</code> and <code>%postremove</code>
 directives specify commands that are run before and after removal of
 the software:</p>
<pre>
%preremove echo Command before removing
%postremove echo Command after removing
</pre>

<!-- NEED 3in -->
<center>
<table ALIGN="CENTER" BORDER="1"><caption> <a NAME="TABLE_4_2">Table
 4.2: Scripts Support</a></caption>
<tr><th><small>Format</small></th><th><small>%preinstall</small></th><th>
<small>%postinstall</small></th><th><small>%prepatch</small></th><th><small>
%postpatch</small></th><th><small>%preremove</small></th><th><small>
%postremove</small></th></tr>
<tr><td ALIGN="CENTER">aix</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">bsd</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td></tr>
<tr><td ALIGN="CENTER">deb</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">inst</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">osx</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td></tr>
<tr><td ALIGN="CENTER">pkg</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">portable</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">rpm</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">setld</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
<tr><td ALIGN="CENTER">slackware</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
No</td><td ALIGN="CENTER">No</td></tr>
<tr><td ALIGN="CENTER">swinstall</td><td ALIGN="CENTER">Yes</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">No</td><td ALIGN="CENTER">
Yes</td><td ALIGN="CENTER">Yes</td></tr>
</table>
</center>
<p>&nbsp;</p>
<p>To include an external script file, use the <code>&lt;filename</code>
 notation:</p>
<pre>
%postinstall &lt;filename
</pre>
<p>To include multiple lines directly, use the <code>&lt;&lt;string</code>
 notation (a.k.a. a &quot;here&quot; document):</p>
<pre>
%postinstall &lt;&lt;EOF
echo Command before installing
/usr/bin/foo
EOF
</pre>
<p>Note that all commands specified in the list file will use the
 variable expansion provided by EPM, so be sure to quote any dollar sign
 (<code>$</code>) characters in your commands. For example, &quot;$foo&quot; is
 replaced by the value of &quot;foo&quot;, but &quot;$$foo&quot; becomes &quot;$foo&quot;.</p>

<!-- NEED 4in -->
<h2><a NAME="5_4">Conditional Directives</a></h2>
<p>The <code>%system</code> directive can match or not match specific
 operating system names or versions. The operating system name is the
 name reported by <code>uname</code> in lowercase, while the operating
 system version is the major and minor version number reported by <code>
uname -r</code>:</p>
<dl>
<dt><code>%system macos</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building a distribution for
 the macOS operating system.
<br> &nbsp;</dd>
<dt><code>%system linux-2.0</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building a distribution for
 Linux 2.0.x.
<br> &nbsp;</dd>
<dt><code>%system !macos !linux-2.0</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building a distribution for
 operating systems other than macOS and Linux 2.0.x.
<br> &nbsp;</dd>
</dl>
<p>The special name <code>all</code> is used to match all operating
 systems:</p>
<pre>
%system all
</pre>
<p>For format-specific files, the <code>%format</code> directive can be
 used:</p>
<dl>
<dt><code>%format rpm</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building an RPM distribution.
<br> &nbsp;</dd>
<dt><code>%format !rpm</code>
<br> &nbsp;</dt>
<dd>Only include the following files when not building an RPM
 distribution.x.
<br> &nbsp;</dd>
<dt><code>%format all</code>
<br> &nbsp;</dt>
<dd>Include the following files for all types of distributions.
<br> &nbsp;</dd>
</dl>
<p>The <code>%arch</code> directive can match or not match specific
 architectures. The architecture name is the name reported by <code>
uname -m</code>; &quot;arm&quot; is a synonym for &quot;armv6&quot;, &quot;armv7&quot;, and &quot;armv8&quot;,
 &quot;intel&quot; is a synonym for &quot;i386&quot;, &quot;i486&quot;, &quot;i586&quot;, and &quot;i686&quot;, and
 &quot;powerpc&quot; is a synonym for &quot;ppc&quot;:</p>
<dl>
<dt><code>%arch intel</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building a package for 32-bit
 Intel processors.
<br> &nbsp;</dd>
<dt><code>%arch armv6</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building a package for ARMv6
 processors.
<br> &nbsp;</dd>
<dt><code>%system !powerpc</code>
<br> &nbsp;</dt>
<dd>Only include the following files when building a package for
 processors other than PowerPC.
<br> &nbsp;</dd>
</dl>
<p>The special name <code>all</code> is used to match all architectures:</p>
<pre>
%arch all
</pre>
<p>Finally, EPM can conditionally include lines using the <code>%if</code>
, <code>%elseif</code>, <code>%ifdef</code>, <code>%elseifdef</code>, <code>
%else</code>, and <code>%endif</code> directives.</p>
<p><code>%if</code> directives include the text that follows if the
 named variable(s) are defined to a non-empty string:</p>
<pre>
%if FOO
f 755 root sys /usr/bin/foo foo
%elseif BAR
f 755 root sys /usr/bin/bar bar
%endif
</pre>
<p><code>%ifdef</code> directives only include the text if the named
 variable(s) are defined to any value:</p>
<pre>
%ifdef OSTYPE
f 755 root sys /usr/bin/program program-$OSTYPE
%else
f 755 root sys /usr/bin/program program.sh
%endif
</pre>
<h2><a NAME="5_5">Protecting Object Files from Stripping</a></h2>
<p>The <code>nostrip()</code> option can be included at the end of a
 file line to prevent EPM from stripping the symbols and debugging
 information from a file:</p>
<pre>
f 755 root sys /usr/lib/libfoo.so libfoo.so nostrip()
</pre>
<h2><a NAME="5_6">Software Patches</a></h2>
<p>EPM supports portable software patch distributions which contain only
 the differences between the original and patch release. Patch files are
 specified using uppercase letters for the affected files. In the
 following example, the files<var> /usr/bin/bar</var> and<var>
 /etc/foo.conf</var> are marked as changed since the original release:</p>
<pre>
f 755 root sys /usr/bin/foo foo
F 755 root sys /usr/bin/bar bar
f 755 root sys /usr/share/man/man1/foo.1 foo.man
f 755 root sys /usr/share/man/man1/bar.1 bar.man
C 644 root sys /etc/foo.conf foo.conf
</pre>
<h2><a NAME="5_7">Variables</a></h2>
<p>EPM imports the current environment variables for use in your list
 file. You can also define new variable in the list file or on the
 command-line when running EPM.</p>
<p>Variables are defined by starting the line with the dollar sign (<code>
$</code>) followed by the name and value:</p>
<pre>
$name=value
$prefix=/usr
$exec_prefix=${prefix}
$bindir=$exec_prefix/bin
</pre>
<p>Variable substitution is performed when the variable is defined, so
 be careful with the ordering of your variable definitions.</p>
<p>Also, any variables you specify in your list file will be overridden
 by variables defined on the command-line or in your environment, just
 like with <code>make</code>. This can be a useful feature or a curse,
 depending on your choice of variable names.</p>
<p>As you can see, variables are referenced using the dollar sign (<code>
$</code>). As with most shells, variable names can be surrounded by
 curly braces (<code>${variable}</code>) to explicitly delimit the name.</p>

<!-- NEED 1in -->
<p>If you need to insert a <code>$</code> in a filename or a script, use
 <code>$$</code>:</p>
<pre>
%install echo Enter your name:
%install read $$name
%install echo Your name is $$name.
</pre>
<h2><a NAME="5_8">Init Scripts</a></h2>
<p>Initialization scripts are generally portable between platforms,
 however the location of initialization scripts varies greatly.</p>
<p>The <code>i</code> file type can be used to specify and init script
 that is to be installed on the system. EPM will then determine the
 appropriate init file directories to use and create any required
 symbolic links to support the init script:</p>
<pre>
i 755 root sys foo foo.sh
</pre>
<p>The previous example creates an init script named<var> foo</var> on
 the end-user system and will create symbolic links to run levels 0, 2,
 3, and 5 as needed, using a sequence number of 00 (or 000) for the
 shutdown script and 99 (or 999) for the startup script.</p>
<p>To specify run levels and sequence numbers, use the <code>runlevel()</code>
, <code>start()</code>, and <code>stop()</code> options:</p>
<pre>
i 755 root sys foo foo.sh &quot;runlevel(02) start(50) stop(30)&quot;
</pre>
<h2><a NAME="5_9">Literal Package Data</a></h2>
<p>Sometimes you need to include format-specific package data such as
 keywords, signing keys, and response data. The <code>%literal(section)</code>
 directive adds format-specific data to the packages you create. Literal
 data is currently only supported for RPM and PKG packages.</p>
<h3>Debian Literal Data</h3>
<p>Debian packages have control files that provide metadata for each
 package. The <code>%literal(control)</code> directive can be used to
 provide this metadata:</p>
<pre>
%literal(control) &lt;&lt;EOF
Section: misc
Priority: extra
EOF
</pre>
<h3>PKG Literal Data</h3>
<p>PKG packages support request files that are used to do batch
 installations when installation commands require user input. The <code>
%literal(request)</code> directive can be used to provide this user
 input:</p>
<pre>
%literal(request) &lt;&lt;EOF
John Doe
1 Any Lane
Forest Lawn, OH 12345
EOF
</pre>
<h3>RPM Literal Data</h3>
<p>RPM packages support numerous attributes in the &quot;spec&quot; file that
 control how the package is created and what metadata is included with
 the package. The <code>%literal(spec)</code> directive can be used to
 provide attributes for the spec file:</p>
<pre>
%literal(spec) &lt;&lt;EOF
%changelog
* Tue Aug 26 2008 John Doe &lt;johndoe@domain.com&gt;

- Added new feature &quot;bar&quot;

* Fri Aug 1 2008 John Doe &lt;johndoe@domain.com&gt;

- Added new feature &quot;foo&quot;
EOF
</pre>
<HR NOSHADE>
<h1><a NAME="EXAMPLES">5 - EPM Packaging Examples</a></h1>
<p>This chapter shows how the EPM and CUPS software is packaged using
 EPM list files. The EPM list file example highlights the basic features
 of EPM, while the CUPS list file example shows the more advanced
 features of EPM.</p>
<h2><a NAME="6_1">Packaging the EPM Software</a></h2>
<p>The EPM software comes with its own autoconf-generated<var> epm.list</var>
 file that is used to package and test EPM. The EPM package consists of
 the main package plus a &quot;documentation&quot; subpackage for the
 documentation files and a &quot;man&quot; subpackage for the man pages.</p>
<p>We start by defining variables for each of the autoconf directory
 variables:</p>
<pre>
$prefix=/usr
$exec_prefix=/usr
$bindir=${exec_prefix}/bin
$datadir=/usr/share
$docdir=${datadir}/doc/epm
$libdir=/usr/lib
$mandir=/usr/share/man
$srcdir=.
</pre>
<p>Then we provide the general product information that is required for
 all packages; notice the use of <code>${srcdir}</code> to reference the
 LICENSE and README files:</p>
<pre>
%product ESP Package Manager
%copyright 1999-2020 by Michael R Sweet, All Rights Reserved.
%copyright 2020 by Jim Jagielski, All Rights Reserved.
%vendor Michael R Sweet
%vendor Jim Jagielski
%license ${srcdir}/LICENSE
%readme ${srcdir}/README.md
%description Universal software packaging tool for UNIX.
%version 4.6 460
</pre>
<p>After the product information, we include all of the non-GUI files
 that are part of EPM:</p>
<pre>
# Executables
%system all
f 0555 root sys ${bindir}/epm epm
f 0555 root sys ${bindir}/epminstall epminstall
f 0555 root sys ${bindir}/mkepmlist mkepmlist

# Documentation
%subpackage documentation
%description Documentation for EPM
f 0444 root sys ${docdir}/README $srcdir/README.md
f 0444 root sys ${docdir}/LICENSE $srcdir/LICENSE
f 0444 root sys ${docdir}/epm-book.epub $srcdir/doc/epm-book.epub
f 0444 root sys ${docdir}/epm-book.html $srcdir/doc/epm-book.html
f 0444 root sys ${docdir}/epm-book.pdf $srcdir/doc/epm-book.pdf

# Man pages
%subpackage man
%description Man pages for EPM
f 0444 root sys ${mandir}/man1/epm.1 $srcdir/doc/epm.man
f 0444 root sys ${mandir}/man1/epminstall.1 $srcdir/doc/epminstall.1
f 0444 root sys ${mandir}/man1/mkepmlist.1 $srcdir/doc/mkepmlist.1
f 0444 root sys ${mandir}/man5/epm.list.5 $srcdir/doc/epm.list.5
</pre>
<p>Finally, we conditionally include the GUI files depending on the
 state of a variable called <code>GUIS</code>:</p>
<pre>
# GUI files...
$GUIS=setup uninst

%if GUIS
%subpackage
f 0555 root sys ${libdir}/epm/setup setup
f 0555 root sys ${libdir}/epm/uninst uninst

%system macos
f 0444 root sys ${datadir}/epm/default.icns default.icns
%system all

%subpackage man
f 0444 root sys ${mandir}/man1/setup.1 $srcdir/doc/setup.1
f 0444 root sys ${mandir}/man5/setup.types.5 $srcdir/doc/setup.types.5

%endif
</pre>
<HR NOSHADE>

<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  &quot;License&quot;); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License. 
-->
<div class="container">
<hr class="space col"><div class="block"><div class="column span-24"><div
id="header">
<!-- Add 'default' header section here. -->
<h1><a name="LICENSE">Apache License, Version 2.0</a></h1>
</div></div></div>
<hr><div class="block content"><div class="column span-15 colborder"><div
class="section-content">
<p align="center"> Apache License
<br> Version 2.0, January 2004
<br> <a href="http://www.apache.org/licenses/">
http://www.apache.org/licenses/</a></p>
<p> TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION</p>
<p><b><a name="definitions">1. Definitions</a></b>.</p>
<p> &quot;License&quot; shall mean the terms and conditions for use, reproduction,
 and distribution as defined by Sections 1 through 9 of this document.</p>
<p> &quot;Licensor&quot; shall mean the copyright owner or entity authorized by
 the copyright owner that is granting the License.</p>
<p> &quot;Legal Entity&quot; shall mean the union of the acting entity and all
 other entities that control, are controlled by, or are under common
 control with that entity. For the purposes of this definition,
 &quot;control&quot; means (i) the power, direct or indirect, to cause the
 direction or management of such entity, whether by contract or
 otherwise, or (ii) ownership of fifty percent (50%) or more of the
 outstanding shares, or (iii) beneficial ownership of such entity.</p>
<p> &quot;You&quot; (or &quot;Your&quot;) shall mean an individual or Legal Entity
 exercising permissions granted by this License.</p>
<p> &quot;Source&quot; form shall mean the preferred form for making
 modifications, including but not limited to software source code,
 documentation source, and configuration files.</p>
<p> &quot;Object&quot; form shall mean any form resulting from mechanical
 transformation or translation of a Source form, including but not
 limited to compiled object code, generated documentation, and
 conversions to other media types.</p>
<p> &quot;Work&quot; shall mean the work of authorship, whether in Source or
 Object form, made available under the License, as indicated by a
 copyright notice that is included in or attached to the work (an
 example is provided in the Appendix below).</p>
<p> &quot;Derivative Works&quot; shall mean any work, whether in Source or Object
 form, that is based on (or derived from) the Work and for which the
 editorial revisions, annotations, elaborations, or other modifications
 represent, as a whole, an original work of authorship. For the purposes
 of this License, Derivative Works shall not include works that remain
 separable from, or merely link (or bind by name) to the interfaces of,
 the Work and Derivative Works thereof.</p>
<p> &quot;Contribution&quot; shall mean any work of authorship, including the
 original version of the Work and any modifications or additions to that
 Work or Derivative Works thereof, that is intentionally submitted to
 Licensor for inclusion in the Work by the copyright owner or by an
 individual or Legal Entity authorized to submit on behalf of the
 copyright owner. For the purposes of this definition, &quot;submitted&quot; means
 any form of electronic, verbal, or written communication sent to the
 Licensor or its representatives, including but not limited to
 communication on electronic mailing lists, source code control systems,
 and issue tracking systems that are managed by, or on behalf of, the
 Licensor for the purpose of discussing and improving the Work, but
 excluding communication that is conspicuously marked or otherwise
 designated in writing by the copyright owner as &quot;Not a Contribution.&quot;</p>
<p> &quot;Contributor&quot; shall mean Licensor and any individual or Legal Entity
 on behalf of whom a Contribution has been received by Licensor and
 subsequently incorporated within the Work.</p>
<p><b><a name="copyright">2. Grant of Copyright License</a></b>. Subject
 to the terms and conditions of this License, each Contributor hereby
 grants to You a perpetual, worldwide, non-exclusive, no-charge,
 royalty-free, irrevocable copyright license to reproduce, prepare
 Derivative Works of, publicly display, publicly perform, sublicense,
 and distribute the Work and such Derivative Works in Source or Object
 form.</p>
<p><b><a name="patent">3. Grant of Patent License</a></b>. Subject to
 the terms and conditions of this License, each Contributor hereby
 grants to You a perpetual, worldwide, non-exclusive, no-charge,
 royalty-free, irrevocable (except as stated in this section) patent
 license to make, have made, use, offer to sell, sell, import, and
 otherwise transfer the Work, where such license applies only to those
 patent claims licensable by such Contributor that are necessarily
 infringed by their Contribution(s) alone or by combination of their
 Contribution(s) with the Work to which such Contribution(s) was
 submitted. If You institute patent litigation against any entity
 (including a cross-claim or counterclaim in a lawsuit) alleging that
 the Work or a Contribution incorporated within the Work constitutes
 direct or contributory patent infringement, then any patent licenses
 granted to You under this License for that Work shall terminate as of
 the date such litigation is filed.</p>
<p><b><a name="redistribution">4. Redistribution</a></b>. You may
 reproduce and distribute copies of the Work or Derivative Works thereof
 in any medium, with or without modifications, and in Source or Object
 form, provided that You meet the following conditions:</p>
<ol type="a">
<li>You must give any other recipients of the Work or Derivative Works a
 copy of this License; and
<br>
<br></li>
<li>You must cause any modified files to carry prominent notices stating
 that You changed the files; and
<br>
<br></li>
<li>You must retain, in the Source form of any Derivative Works that You
 distribute, all copyright, patent, trademark, and attribution notices
 from the Source form of the Work, excluding those notices that do not
 pertain to any part of the Derivative Works; and
<br>
<br></li>
<li>If the Work includes a &quot;NOTICE&quot; text file as part of its
 distribution, then any Derivative Works that You distribute must
 include a readable copy of the attribution notices contained within
 such NOTICE file, excluding those notices that do not pertain to any
 part of the Derivative Works, in at least one of the following places:
 within a NOTICE text file distributed as part of the Derivative Works;
 within the Source form or documentation, if provided along with the
 Derivative Works; or, within a display generated by the Derivative
 Works, if and wherever such third-party notices normally appear. The
 contents of the NOTICE file are for informational purposes only and do
 not modify the License. You may add Your own attribution notices within
 Derivative Works that You distribute, alongside or as an addendum to
 the NOTICE text from the Work, provided that such additional
 attribution notices cannot be construed as modifying the License.</li>
</ol>
<p> You may add Your own copyright statement to Your modifications and
 may provide additional or different license terms and conditions for
 use, reproduction, or distribution of Your modifications, or for any
 such Derivative Works as a whole, provided Your use, reproduction, and
 distribution of the Work otherwise complies with the conditions stated
 in this License.</p>
<p><b><a name="contributions">5. Submission of Contributions</a></b>.
 Unless You explicitly state otherwise, any Contribution intentionally
 submitted for inclusion in the Work by You to the Licensor shall be
 under the terms and conditions of this License, without any additional
 terms or conditions. Notwithstanding the above, nothing herein shall
 supersede or modify the terms of any separate license agreement you may
 have executed with Licensor regarding such Contributions.</p>
<p><b><a name="trademarks">6. Trademarks</a></b>. This License does not
 grant permission to use the trade names, trademarks, service marks, or
 product names of the Licensor, except as required for reasonable and
 customary use in describing the origin of the Work and reproducing the
 content of the NOTICE file.</p>
<p><b><a name="no-warranty">7. Disclaimer of Warranty</a></b>. Unless
 required by applicable law or agreed to in writing, Licensor provides
 the Work (and each Contributor provides its Contributions) on an &quot;AS
 IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 or implied, including, without limitation, any warranties or conditions
 of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 PARTICULAR PURPOSE. You are solely responsible for determining the
 appropriateness of using or redistributing the Work and assume any
 risks associated with Your exercise of permissions under this License.</p>
<p><b><a name="no-liability">8. Limitation of Liability</a></b>. In no
 event and under no legal theory, whether in tort (including
 negligence), contract, or otherwise, unless required by applicable law
 (such as deliberate and grossly negligent acts) or agreed to in
 writing, shall any Contributor be liable to You for damages, including
 any direct, indirect, special, incidental, or consequential damages of
 any character arising as a result of this License or out of the use or
 inability to use the Work (including but not limited to damages for
 loss of goodwill, work stoppage, computer failure or malfunction, or
 any and all other commercial damages or losses), even if such
 Contributor has been advised of the possibility of such damages.</p>
<p><b><a name="additional">9. Accepting Warranty or Additional Liability</a>
</b>. While redistributing the Work or Derivative Works thereof, You may
 choose to offer, and charge a fee for, acceptance of support, warranty,
 indemnity, or other liability obligations and/or rights consistent with
 this License. However, in accepting such obligations, You may act only
 on Your own behalf and on Your sole responsibility, not on behalf of
 any other Contributor, and only if You agree to indemnify, defend, and
 hold each Contributor harmless for any liability incurred by, or claims
 asserted against, such Contributor by reason of your accepting any such
 warranty or additional liability.</p>
<p> END OF TERMS AND CONDITIONS</p>
</div>
<h2 id="apply"><a NAME="7_1"> APPENDIX: How to apply the Apache License
 to your work</a></h2>
<div class="section-content">
<p> To apply the Apache License to your work, attach the following
 boilerplate notice, with the fields enclosed by brackets &quot;[]&quot; replaced
 with your own identifying information. (Don't include the brackets!)
 The text should be enclosed in the appropriate comment syntax for the
 file format. We also recommend that a file or class name and
 description of purpose be included on the same &quot;printed page&quot; as the
 copyright notice for easier identification within third-party archives.</p>
<div class="source"> <code> Copyright [yyyy] [name of copyright owner]
 Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may
 not use this file except in compliance with the License. You may obtain
 a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied. See the License for the specific language governing
 permissions and limitations under the License.</code></div></div></div></div>
</div><HR NOSHADE>
<h1><a NAME="MANPAGES">B - Command Reference</a></h1>

<!-- NEW PAGE -->

<!-- SECTION: Man Pages -->
<h2 class="title"><a name="epm">epm(1)</a></h2>
<h3 class="title"><a name="NAME">Name</a></h3>
 epm - create software packages.
<h3 class="title"><a name="SYNOPSIS">Synopsis</a></h3>
<b> epm</b> [<b> -a</b><i> architecture</i> ] [<b> -f</b><i> format</i>
 ] [<b> -g</b> ] [<b> -k</b> ] [<b> -m</b><i> name</i> ] [<b> -n</b>[<b>
mrs</b>] ] [<b> -s</b><i> setup.ext</i> ] [<b> --depend</b> ] [<b>
 --help</b> ] [<b> --keep-files</b> ] [<b> --output-dir</b><i> directory</i>
 ] [<b> --setup-image</b><i> setup.ext</i> ] [<b> --setup-program</b><i>
 /foo/bar/setup</i> ] [<b> --setup-types</b><i> setup.types</i> ] [<b>
 --uninstall-program</b><i> /foo/bar/uninst</i> ] [<b> -v</b> ] [<i>
 name=value</i> ...<i> name=value</i> ]<i> product</i> [<i> listfile</i>
 ]
<h3 class="title"><a name="DESCRIPTION">Description</a></h3>
 <a href="#epm"><b>epm</b>(1)</a> generates software packages complete
 with installation, removal, and (if necessary) patch scripts. Unless
 otherwise specified, the files required for<i> product</i> are read
 from a file named &quot;<i>product</i>.list&quot;.
<h3 class="title"><a name="OPTIONS">Options</a></h3>
 The following options are recognized:
<dl class="man">
<dt><b>-a</b><i> architecture</i></dt>
<dd style="margin-left: 5.0em">Specifies the actual architecture for the
 software. Without this option the generic processor architecture is
 used (&quot;intel&quot;, &quot;sparc&quot;, &quot;mips&quot;, etc.)</dd>
<dt><b>-f bsd</b></dt>
<dd style="margin-left: 5.0em">Generate a BSD distribution suitable for
 installation on a FreeBSD, NetBSD, or OpenBSD system.</dd>
<dt><b>-f deb</b></dt>
<dd style="margin-left: 5.0em">Generate a Debian distribution suitable
 for installation on a Debian-based Linux system.</dd>
<dt><b>-f native</b></dt>
<dd style="margin-left: 5.0em">Generate a native distribution. This uses<i>
 deb</i> or<i> rpm</i> for Linux,<i> bsd</i> for FreeBSD, NetBSD, and
 OpenBSD, and<i> macos</i> for macOS. All other operating systems
 default to the<i> portable</i> format.</dd>
<dt><b>-f macos</b></dt>
<dd style="margin-left: 5.0em"></dd>
<dt><b>-f macos-signed</b></dt>
<dd style="margin-left: 5.0em">Generate a macOS software package. The<i>
 macos-signed</i> format uses the signing identity in the
 EPM_SIGNING_IDENTITY environment variable.</dd>
<dt><b>-f portable</b></dt>
<dd style="margin-left: 5.0em">Generate a portable distribution based on
 shell scripts and tar files. The resulting distribution is installed
 and removed the same way on all operating systems. [default]</dd>
<dt><b>-f rpm</b></dt>
<dd style="margin-left: 5.0em"></dd>
<dt><b>-f rpm-signed</b></dt>
<dd style="margin-left: 5.0em">Generate a Red Hat Package Manager
 (&quot;RPM&quot;) distribution suitable for installation on an RPM-based Linux
 system. The<i> rpm-signed</i> format uses the GPG private key you have
 defined in the ~/.rpmmacros file.</dd>
<dt><b>-g</b></dt>
<dd style="margin-left: 5.0em">Disable stripping of executable files in
 the distribution.</dd>
<dt><b>-k</b></dt>
<dd style="margin-left: 5.0em">Keep intermediate (spec, etc.) files used
 to create the distribution in the distribution directory.</dd>
<dt><b>-m</b><i> name</i></dt>
<dd style="margin-left: 5.0em">Specifies the platform name as a string.
 The default is to use the auto-generated name from the<i> -n</i>
 option.</dd>
<dt><b>-n</b>[<i>mrs</i>]</dt>
<dd style="margin-left: 5.0em">Specifies the operating system and
 machine information that is included in the package name. Distributions
 normally are named &quot;product-version-system-release-machine.ext&quot; and
 &quot;product-version-system-release-machine-patch.ext&quot; for patch
 distributions. The &quot;system-release-machine&quot; information can be
 customized or eliminated using the appropriate trailing letters. Using<i>
 -n</i> by itself will remove the &quot;system-release-machine&quot; string from
 the filename entirely. The letter 'm' includes the architecture
 (machine). The letter 'r' includes the operating system version
 (release). The letter 's' includes the operating system name.</dd>
<dt><b>-v</b></dt>
<dd style="margin-left: 5.0em">Increases the amount of information that
 is reported. Use multiple v's for more verbose output.</dd>
<dt><b>--depend</b></dt>
<dd style="margin-left: 5.0em">Lists the dependent (source) files for
 all files in the package.</dd>
<dt><b>--output-dir</b><i> directory</i></dt>
<dd style="margin-left: 5.0em">Specifies the directory for output files.
 The default directory is based on the operating system, version, and
 architecture.</dd>
<dt><b>-s</b><i> setup.ext</i></dt>
<dd style="margin-left: 5.0em"></dd>
<dt><b>--setup-image</b><i> setup.ext</i></dt>
<dd style="margin-left: 5.0em">Include the ESP Software Wizard with the
 specified image file with the distribution. This option is currently
 only supported by portable distributions.</dd>
<dt><b>--setup-program</b><i> /foo/bar/setup</i></dt>
<dd style="margin-left: 5.0em">Specifies the setup executable to use
 with the distribution. This option is currently only supported by
 portable distributions.</dd>
<dt><b>--setup-types</b><i> setup.types</i></dt>
<dd style="margin-left: 5.0em"></dd>
</dl>
<p>Specifies the<i> setup.types</i> file to include with the
 distribution. This option is currently only supported by portable
 distributions.</p>
<dl class="man">
<dt><b>--uninstall-program</b><i> /foo/bar/uninst</i></dt>
<dd style="margin-left: 5.0em">Specifies the uninst executable to use
 with the distribution. This option is currently only supported by
 portable distributions.</dd>
</dl>
<h3 class="title"><a name="ENVIRONMENT">Environment</a></h3>
 The following environment variables are supported by<b> epm</b>:
<dl class="man">
<dt><b>EPM_SIGNING_IDENTITY</b></dt>
<dd style="margin-left: 5.0em">The common name that should be used when
 signing a package.</dd>
</dl>
<h3 class="title"><a name="LIST_FILES">List Files</a></h3>
 The EPM list file format is now described in the<i> epm.list(5)</i> man
 page.
<h3 class="title"><a name="SEE_ALSO">See Also</a></h3>
 <a href="#epminstall"><b>epminstall</b>(1),</a> <a href="#mkepmlist"><b>
mkepmlist</b>(1),</a> <a href="#epm.list"><b>epm.list</b>(5),</a> <a href="#setup">
<b>setup</b>(1).</a>
<h3 class="title"><a name="COPYRIGHT">Copyright</a></h3>
 Copyright &copy; 1999-2020 by Michael R Sweet, All Rights Reserved.
 Copyright &copy; 2020 by Jim Jagielski, All Rights Reserved.
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you
 may not use this file except in compliance with the License. You may
 obtain a copy of the License at</p>
<p> <a href="http://www.apache.org/licenses/LICENSE-2.0">
http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied. See the License for the specific language governing
 permissions and limitations under the License.</p>

<!-- NEW PAGE -->

<!-- SECTION: Man Pages -->
<h2 class="title"><a name="epminstall">epminstall(1)</a></h2>
<h3 class="title"><a name="NAME">Name</a></h3>
 epminstall - add a directory, file, or symlink to a list file.
<h3 class="title"><a name="SYNOPSIS">Synopsis</a></h3>
<b> epminstall</b> [<i> options</i> ]<i> file1</i><i>file2</i><i>...</i><i>
fileN</i><i>directory</i>
<br><b> epminstall</b> [<i> options</i> ]<i> file1</i><i>file2</i>
<br><b> epminstall</b> [<i> options</i> ]<b> -d</b><i> directory1</i><i>
directory2</i><i>...</i><i>directoryN</i>
<h3 class="title"><a name="DESCRIPTION">Description</a></h3>
<b> epminstall</b> adds or replaces a directory, file, or symlink in a
 list file. The default list file is &quot;epm.list&quot; and can be overridden
 using the<i> EPMLIST</i> environment variable or the<i> --list-file</i>
 option.
<p>Entries are either added to the end of the list file or replaced
 in-line. Comments, directives, and variable declarations in the list
 file are preserved.</p>
<h3 class="title"><a name="OPTIONS">Options</a></h3>
<b> epminstall</b> recognizes the standard Berkeley<b> install</b>(8)
 command options:
<dl class="man">
<dt><b>-b</b></dt>
<dd style="margin-left: 5.0em">Make a backup of existing files (ignored,
 default for<b> epm</b>.)</dd>
<dt><b>-c</b></dt>
<dd style="margin-left: 5.0em">BSD old compatibility mode (ignored.)</dd>
<dt><b>-g</b><i> group</i></dt>
<dd style="margin-left: 5.0em">Set the group owner of the file or
 directory to<i> group</i>. The default group is &quot;sys&quot;.</dd>
<dt><b>-m</b><i> mode</i></dt>
<dd style="margin-left: 5.0em">Set the permissions of the file or
 directory to<i> mode</i>. The default permissions are 0755 for
 directories and executable files and 0644 for non-executable files.</dd>
<dt><b>-o</b><i> owner</i></dt>
<dd style="margin-left: 5.0em">Set the owner of the file or directory to<i>
 owner</i>. The default owner is &quot;root&quot;.</dd>
<dt><b>-s</b></dt>
<dd style="margin-left: 5.0em">Strip the files (ignored, default for<b>
 epm</b>.)</dd>
<dt><b>--list-file</b><i> filename.list</i></dt>
<dd style="margin-left: 5.0em">Specify the list file to update.</dd>
</dl>
<h3 class="title"><a name="SEE_ALSO">See Also</a></h3>
<b> epm(1),</b><b> mkepmlist(1),</b> <a href="#epm.list"><b>epm.list</b>
(5).</a>
<h3 class="title"><a name="COPYRIGHT">Copyright</a></h3>
 Copyright &copy; 1999-2020 by Michael R Sweet, All Rights Reserved.
 Copyright &copy; 2020 by Jim Jagielski, All Rights Reserved.
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you
 may not use this file except in compliance with the License. You may
 obtain a copy of the License at</p>
<p> <a href="http://www.apache.org/licenses/LICENSE-2.0">
http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied. See the License for the specific language governing
 permissions and limitations under the License.</p>

<!-- NEW PAGE -->

<!-- SECTION: Man Pages -->
<h2 class="title"><a name="mkepmlist">mkepmlist(1)</a></h2>
<h3 class="title"><a name="NAME">Name</a></h3>
 mkepmlist - make an epm list file from a directory.
<h3 class="title"><a name="SYNOPSIS">Synopsis</a></h3>
<b> mkepmlist</b> [<b> -g</b><i> group</i> ] [<b> -u</b><i> user</i> ] [<b>
 --prefix</b><i> directory</i> ]<i> directory</i> [ ...<i> directory</i>
 ]
<h3 class="title"><a name="DESCRIPTION">Description</a></h3>
<b> mkepmlist</b><b>(1)</b> recursively generates file list entries for
 files, links, and directories. The file list is send to the standard
 output.
<h3 class="title"><a name="OPTIONS">Options</a></h3>
<b> mkepmlist</b> supports the following options:
<dl class="man">
<dt><b>-g</b><i> group</i></dt>
<dd style="margin-left: 5.0em">Overrides the group ownership of the
 files in the specified directories with the specified group name.</dd>
<dt><b>-u</b><i> user</i></dt>
<dd style="margin-left: 5.0em">Overrides the user ownership of the files
 in the specified directories with the specified user name.</dd>
<dt><b>--prefix</b><i> directory</i></dt>
<dd style="margin-left: 5.0em">Adds the specified directory to the
 destination path. For example, if you installed files to &quot;/opt/foo&quot; and
 wanted to build a distribution that installed the files in
 &quot;/usr/local&quot;, the following command would generate a file list that is
 installed in &quot;/usr/local&quot;:
<pre class="man">
<br>
     mkepmlist --prefix=/usr/local /opt/foo &gt;foo.list
</pre>
</dd>
</dl>
<h3 class="title"><a name="SEE_ALSO">See Also</a></h3>
 <a href="#epm"><b>epm</b>(1),</a> <a href="#epminstall"><b>epminstall</b>
(1),</a> <a href="#epm.list"><b>epm.list</b>(5).</a>
<h3 class="title"><a name="COPYRIGHT">Copyright</a></h3>
 Copyright &copy; 1999-2020 by Michael R Sweet, All Rights Reserved.
 Copyright &copy; 2020 by Jim Jagielski, All Rights Reserved.
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you
 may not use this file except in compliance with the License. You may
 obtain a copy of the License at</p>
<p> <a href="http://www.apache.org/licenses/LICENSE-2.0">
http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied. See the License for the specific language governing
 permissions and limitations under the License.</p>

<!-- NEW PAGE -->

<!-- SECTION: Man Pages -->
<h2 class="title"><a name="setup">setup(1)</a></h2>
<h3 class="title"><a name="NAME">Name</a></h3>
 setup - graphical setup program for the esp package manager
<h3 class="title"><a name="SYNOPSIS">Synopsis</a></h3>
<b> setup</b> [<i> directory</i> ]
<h3 class="title"><a name="DESCRIPTION">Description</a></h3>
 <a href="#setup"><b>setup</b>(1)</a> provides a graphical installation
 interface for EPM-generated portable installation packages. It presents
 a step-by-step dialog for collecting a list of packages to install and
 accepting any license agreements for those packages.
<p><b>setup</b> searches for products in the current directory or the
 directory specified on the command-line.</p>
<h3 class="title"><a name="INSTALLATION_TYPES">Installation Types</a></h3>
 The default type of installation is &quot;custom&quot;. That is, users will be
 able to select from the list of products and install them.
<p><b>setup</b> also supports other types of installations. The<i>
 setup.types</i> file, if present, defines the other installation types.</p>
<h3 class="title"><a name="SEE_ALSO">See Also</a></h3>
 <a href="#epm"><b>epm</b>(1),</a> <a href="#setup.types"><b>setup.types</b>
(5).</a>
<h3 class="title"><a name="COPYRIGHT">Copyright</a></h3>
 Copyright &copy; 1999-2020 by Michael R Sweet, All Rights Reserved.
 Copyright &copy; 2020 by Jim Jagielski, All Rights Reserved.
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you
 may not use this file except in compliance with the License. You may
 obtain a copy of the License at</p>
<p> <a href="http://www.apache.org/licenses/LICENSE-2.0">
http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied. See the License for the specific language governing
 permissions and limitations under the License.</p>
<HR NOSHADE>
<h1><a NAME="REFERENCE">C - List File Reference</a></h1>
<p>This appendix provides a complete reference for the EPM list file and
 setup types formats.</p>
<h2><a NAME="epm.list">The EPM List File Format</a></h2>
<p>Each<i> EPM</i> product has an associated list file that describes
 the files to include with the product. Comment lines begin with the &quot;#&quot;
 character and are ignored. All other non-blank lines must begin with a
 letter, dollar sign (&quot;$&quot;), or the percent sign (&quot;%&quot;).</p>

<!-- NEED 3in -->
<h3>List File Directives</h3>
<p>The following list describes all of the list file directives
 supported by<i> EPM</i>:</p>
<dl>
<dd>
<dl>
<dt>$name=value
<br> &nbsp;</dt>
<dd>Sets the named variable to<i> value</i>.<b> Note:</b> Variables set
 in the list file are overridden by variables specified on the
 command-line or in the current environment.
<br> &nbsp;</dd>

<!-- NEED 2in -->
<dt>%copyright<i> copyright notice</i>
<br> &nbsp;</dt>
<dd>Sets the copyright notice for the file.
<br> &nbsp;</dd>
<dt>%description<i> description text</i>
<br> &nbsp;</dt>
<dd>Adds a line of descriptive text to the distribution. Multiple lines
 are supported.
<br> &nbsp;</dd>
<dt>%format<i> format [... format]</i>
<br> &nbsp;</dt>
<dd>Uses following files and directives only if the distribution format
 is the same as<i> format</i>.
<br> &nbsp;</dd>
<dt>%format !<i>format [... format]</i>
<br> &nbsp;</dt>
<dd>Uses following files and directives only if the distribution format
 is not the same as<i> format</i>.
<br> &nbsp;</dd>
<dt>%include<i> filename</i>
<br> &nbsp;</dt>
<dd>Includes files listed in<i> filename</i>.
<br> &nbsp;</dd>
<dt>%incompat<i> product</i></dt>
<dt>%incompat<i> filename</i>
<br> &nbsp;</dt>
<dd>Indicates that this product is incompatible with the named product
 or file.
<br> &nbsp;</dd>
<dt>%if<i> variable [... variable]</i>
<br> %if !<i>variable [... variable]</i>
<br> %ifdef<i> variable [... variable]</i>
<br> %ifdef !<i>variable [... variable]</i>
<br> %elseif<i> variable [... variable]</i>
<br> %elseif !<i>variable [... variable]</i>
<br> %elseifdef<i> variable [... variable]</i>
<br> %elseifdef !<i>variable [... variable]</i>
<br> %else
<br> %endif
<br> &nbsp;</dt>
<dd>Conditionally includes lines in the list file. The<i> %if</i> lines
 include the lines that follow if the named variables are (not) defined
 with a value. The<i> %ifdef</i> lines include the lines that follow if
 the named variables are (not) defined with any value. These conditional
 lines cannot be nested.
<br> &nbsp;</dd>
<dt>%install<i> script or program</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run after all files are
 installed. (This has been obsoleted by the %postinstall directive)
<br> &nbsp;</dd>
<dt>%license<i> license file</i>
<br> &nbsp;</dt>
<dd>Specifies the file to display as the software license.
<br> &nbsp;</dd>
<dt>%packager<i> name of packager</i>
<br> &nbsp;</dt>
<dd>Specifies the name of the packager.
<br> &nbsp;</dd>
<dt>%patch<i> script or program</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run after all files are patched.
 (This has been obsoleted by the %postpatch directive)
<br> &nbsp;</dd>

<!-- NEED 2in -->
<dt>%postinstall<i> script or program</i>
<br> %postinstall &lt;<i>scriptfile</i>
<br> %postinstall &lt;&lt;<i>string</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run after all files are
 installed.
<br> &nbsp;</dd>
<dt>%postpatch<i> script or program</i>
<br> %postpatch &lt;<i>scriptfile</i>
<br> %postpatch &lt;&lt;<i>string</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run after all files are patched.
<br> &nbsp;</dd>
<dt>%postremove<i> script or program</i>
<br> %postremove &lt;<i>scriptfile</i>
<br> %postremove &lt;&lt;<i>string</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run after removing files.
<br> &nbsp;</dd>
<dt>%preinstall<i> script or program</i>
<br> %preinstall &lt;<i>scriptfile</i>
<br> %preinstall &lt;&lt;<i>string</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run before all files are
 installed.
<br> &nbsp;</dd>
<dt>%prepatch<i> script or program</i>
<br> %prepatch &lt;<i>scriptfile</i>
<br> %prepatch &lt;&lt;<i>string</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run before all files are
 patched.
<br> &nbsp;</dd>
<dt>%preremove<i> script or program</i>
<br> %preremove &lt;<i>scriptfile</i>
<br> %preremove &lt;&lt;<i>string</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run before removing files.
<br> &nbsp;</dd>
<dt>%product<i> product name</i>
<br> &nbsp;</dt>
<dd>Specifies the product name.
<br> &nbsp;</dd>

<!-- NEED 2in -->
<dt>%provides<i> product name</i>
<br> &nbsp;</dt>
<dd>Indicates that this product provides the named dependency.
<br> &nbsp;</dd>
<dt>%readme<i> readme file</i>
<br> &nbsp;</dt>
<dd>Specifies a README file to be included in the distribution.
<br> &nbsp;</dd>
<dt>%remove<i> script or program</i>
<br> &nbsp;</dt>
<dd>Specifies a script or program to be run before removing files. (This
 has been obsoleted by the %preremove directive)
<br> &nbsp;</dd>
<dt>%release<i> number</i>
<br> &nbsp;</dt>
<dd>Specifies the release or build number of a product (defaults to 0).
<br> &nbsp;</dd>
<dt>%replaces<i> product</i>
<br> &nbsp;</dt>
<dd>Indicates that this product replaces the named product.
<br> &nbsp;</dd>
<dt>%requires<i> product</i></dt>
<dt>%requires<i> filename</i>
<br> &nbsp;</dt>
<dd>Indicates that this product requires the named product or file.
<br> &nbsp;</dd>
<dt>%system<i> system[-release] [... system[-release]]</i>
<br> &nbsp;</dt>
<dd>Specifies that the following files should only be used for the
 specified operating systems and releases.
<br> &nbsp;</dd>
<dt>%system !<i>system[-release] [... system[-release]]</i>
<br> &nbsp;</dt>
<dd>Specifies that the following files should not be used for the
 specified operating systems and releases.
<br> &nbsp;</dd>
<dt>%system all
<br> &nbsp;</dt>
<dd>Specifies that the following files are applicable to all operating
 systems.
<br> &nbsp;</dd>
<dt>%vendor<i> vendor or author name</i>
<br> &nbsp;</dt>
<dd>Specifies the vendor or author of the product.
<br> &nbsp;</dd>

<!-- NEED 2in -->
<dt>%version<i> version number</i>
<br> &nbsp;</dt>
<dd>Specifies the version number of the product.
<br> &nbsp;</dd>
<dt>c<i> mode user group destination source</i></dt>
<dt>C<i> mode user group destination source</i>
<br> &nbsp;</dt>
<dd>Specifies a configuration file for installation. The second form
 specifies that the file has changed or is new and should be included as
 part of a patch. Configuration files are installed as &quot;destination.N&quot;
 if the destination already exists.
<br> &nbsp;</dd>
<dt>d<i> mode user group destination -</i></dt>
<dt>D<i> mode user group destination -</i>
<br> &nbsp;</dt>
<dd>Specifies a directory should be created when installing the
 software. The second form specifies that the directory is new and
 should be included as part of a patch.
<br> &nbsp;</dd>

<!-- NEED 2in -->
<dt>f<i> mode user group destination source [nostrip()]</i></dt>
<dt>F<i> mode user group destination source [nostrip()]</i>
<br> &nbsp;</dt>
<dd>Specifies a file for installation. The second form specifies that
 the file has changed or is new and should be included as part of a
 patch. If the &quot;nostrip()&quot; option is included, the file will not be
 stripped before the installation is created.
<br> &nbsp;</dd>
<dt>f<i> mode user group destination source/pattern [nostrip()]</i></dt>
<dt>F<i> mode user group destination source/pattern [nostrip()]</i>
<br> &nbsp;</dt>
<dd>Specifies one or more files for installation using shell wildcard
 patterns. The second form specifies that the files have changed or are
 new and should be included as part of a patch. If the &quot;nostrip()&quot;
 option is included, the file will not be stripped before the
 installation is created.
<br> &nbsp;</dd>
<dt>i<i> mode user group service-name source [&quot;options&quot;]</i></dt>
<dt>I<i> mode user group service-name source [&quot;options&quot;]</i>
<br> &nbsp;</dt>
<dd>Specifies an initialization script for installation. The second form
 specifies that the file has changed or is new and should be included as
 part of a patch. Initialization scripts are stored in<var>
 /etc/software/init.d</var> and are linked to the appropriate
 system-specific directories for run levels 0, 2, 3, and 5.
 Initialization scripts<b> must</b> accept at least the<i> start</i> and<i>
 stop</i> commands. The optional<i> options</i> following the source
 filename can be any of the following:
<br> &nbsp;
<dl>
<dt>order(<i>string</i>)</dt>
<dd>Specifies the relative startup order compared to the required and
 used system functions. Supported values include First, Early, None,
 Late, and Last (macOS only).</dd>
<dt>provides(<i>name(s)</i>)</dt>
<dd>Specifies names of system functions that are provided by this
 startup item (macOS only).</dd>

<!-- NEED 3 -->
<dt>requires(<i>name(s)</i>)</dt>
<dd>Specifies names of system functions that are required by this
 startup item (macOS only).</dd>
<dt>runlevels(<i>levels</i>)</dt>
<dd>Specifies the run levels to use.</dd>
<dt>start(<i>number</i>)</dt>
<dd>Specifies the starting sequence number from 00 to 99.</dd>
<dt>stop(<i>number</i>)</dt>
<dd>Specifies the ending sequence number from 00 to 99.</dd>
<dt>uses(<i>name(s)</i>)</dt>
<dd>Specifies names of system functions that are used by this startup
 item (macOS only).</dd>
</dl>
<br> &nbsp;</dd>

<!-- NEED 2in -->
<dt>l<i> mode user group destination source</i></dt>
<dt>L<i> mode user group destination source</i>
<br> &nbsp;</dt>
<dd>Specifies a symbolic link in the installation. The second form
 specifies that the link has changed or is new and should be included as
 part of a patch.
<br> &nbsp;</dd>
<dt>R<i> mode user group destination</i>
<br> &nbsp;</dt>
<dd>Specifies that the file is to be removed upon patching. The<i> user</i>
 and<i> group</i> fields are ignored. The<i> mode</i> field is only used
 to determine if a check should be made for a previous version of the
 file.
<br> &nbsp;</dd>
</dl>
</dd>
</dl>

<!-- NEED 3in -->
<h3>List Variables</h3>
<p><i>EPM</i> maintains a list of variables and their values which can
 be used to substitute values in the list file. These variables are
 imported from the current environment and taken from the command-line
 and list file as provided. Substitutions occur when the variable name
 is referenced with the dollar sign ($):</p>
<pre>
%postinstall &lt;&lt;EOF
echo What is your name:
read $$name
echo Your name is $$name
EOF

f 0555 root sys ${bindir}/foo foo
f 0555 root sys $datadir/foo/foo.dat foo.dat
</pre>
<p>Variable names can be surrounded by curly brackets (${name}) or alone
 ($name); without brackets the name is terminated by the first slash
 (/), dash (-), or whitespace. The dollar sign can be inserted using $$.</p>

<!-- NEED 5in -->
<h2><a NAME="setup.types">The setup.types File</a></h2>
<p>The EPM<b> setup</b> program normally presents the user with a list
 of software products to install, which is called a &quot;custom&quot; software
 installation.</p>
<p>If a file called<i> setup.types</i> is present in the package
 directory, the user will instead be presented with a list of
 installation types. Each type has an associated product list which
 determines the products that are installed by default. If a type has no
 products associated with it, then it is treated as a custom
 installation and the user is presented with a list of packages to
 choose from.</p>
<p>The<i> setup.types</i> file is an ASCII text file consisting of type
 and product lines. Comments can be inserted by starting a line with the
 pound sign (#). Each installation type is defined by a line starting
 with the word <code>TYPE</code>. Products are defined by a line
 starting with the word <code>INSTALL</code>:</p>
<pre>
# Pre-select the user packages
TYPE Typical End-User Configuration
INSTALL foo
INSTALL foo-help

# Pre-select the developer packages
TYPE Typical Developer Configuration
INSTALL foo
INSTALL foo-help
INSTALL foo-devel
INSTALL foo-examples

# Allow the user to select packages
TYPE Custom Configuration
</pre>
<p>In the example above, three installation types are defined. Since the
 last type includes no products, the user will be presented with the
 full list of products to choose from.</p>
</BODY>
</HTML>
